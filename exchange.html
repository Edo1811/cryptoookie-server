<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cryptoookie - by theCookie.net</title>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
<!-- === GAME UI === -->
    <div id="gameUI" style="display: none">
      <h1>$COOKIE Exchange</h1>
      <div class="price">
        Current $COOKIE price: <span id="price">$100.00</span>
      </div>
      <div class="wallet">
        Balance: cc<span id="balance">500.00</span>$<br />
        You own: <span id="cookies">0</span> $COOKIEs
      </div>

      <div class="actions">
        <div class="select-wrap" role="group" aria-label="Quantity selector">
          <label for="qtySelect">Qty</label>
          <select id="qtySelect">
            <option value="1">1×</option>
            <option value="10">10×</option>
            <option value="100">100×</option>
            <option value="1000">1000×</option>
            <option value="max">Max</option>
          </select>
        </div>

        <button id="buyBtn" class="btn" onclick="buySelected()">Buy</button>
        <button id="sellBtn" class="btn" onclick="sellSelected()">Sell</button>
      </div>

      <!-- Graph container -->
<div id="graphWrapper" style="width: 700px; margin: 0 auto;">

  <div style="display: flex; align-items: center; gap: 10px;">

    <!-- Price indicators (left side) -->
    <div id="priceLabels" 
        style="text-align: right; width: 60px; font-family: monospace; font-size: 13px; line-height: 1.5;">
      <div id="labelMax"></div>
      <div id="labelMed" style="margin-top: 50px;"></div>
      <div id="labelMin" style="margin-top: 50px;"></div>
    </div>

    <!-- Graph canvas -->
    <canvas id="graph" width="600" height="200"
            style="border-radius: 12px; background: white;"></canvas>

  </div>

  <!-- Time axis -->
  <div style="display: flex; justify-content: space-between; 
              margin-left: 60px; margin-top: 4px; 
              width: 600px; font-family: monospace; font-size: 13px; color:#777;">
    <span>60s ago</span>
    <span style="margin-right: 8px;">Now</span>
  </div>

</div>
  <!--<canvas id="graph" width="600" height="200"></canvas>   >> Am i this stupid?    -->
      
      <h2>Wallet History</h2>
      <table id="walletTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Amount</th>
            <th>Price per $COOKIE</th>
            <th>Total Spent</th>
            <th>Time Left</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="walletBody"></tbody>
      </table>

      <p style="margin-top: 15px">
        <a href="debts.html" class="btn">View Debts</a>
      </p>
    </div>

<script src="pricefluctuator.js"></script>
<script>
  clearInterval(fluctIntervalId);
  const currentUser = sessionStorage.getItem("username");
  if (!currentUser) {
    window.location.href = "login.html";
  } else {
    document.getElementById("gameUI").style.display = "block";
    console.log("✅ Logged in as", currentUser);
    // reinitialize
    updateDisplay();
    drawGraph();
    setInterval(fluctuatePrice, 1500);
  }
</script>

  </body>
</html>
